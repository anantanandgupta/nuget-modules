angular.module("ui.bootstrap.contextMenu",[]).service("CustomService",function(){return{initialize:function(a){console.log("got here",a)}}}).directive("contextMenu",["$parse","$q","CustomService","$sce",function(g,i,b,n){var l=[];var d=null;var c="New Item";var m=function(o){while(l.length&&(!o||l.length>o)){l.pop().remove()}if(l.length==0&&d){d.remove()}};var h=function(v,x,u,o,q,s,w,r){var p=r("<a>");p.css("padding-right","8px");p.attr({tabindex:"-1",href:"#"});if(typeof x[0]==="string"){u=x[0]}else{if(typeof x[0]==="function"){u=x[0].call(v,v,o,q)}else{if(typeof x.text!=="undefined"){u=x.text}}}var t=i.when(u);s.push(t);t.then(function(y){if(w){p.css("cursor","default");p.append(r('<strong style="font-family:monospace;font-weight:bold;float:right;">&gt;</strong>'))}p.append(y)});return p};var e=function(y,p,q,A,s,v,t,u,r,o){var z=angular.isArray(A[1])||(A[1]&&angular.isFunction(A[1].then))?A[1]:angular.isArray(A[2])||(A[2]&&angular.isFunction(A[2].then))?A[2]:angular.isArray(A[3])||(A[3]&&angular.isFunction(A[3].then))?A[3]:null;var x=c;if(typeof A[0]==="function"||typeof A[0]==="string"||typeof A.text!=="undefined"){x=h(y,A,x,p,q,t,z,r)}else{if(typeof A.html==="function"){x=A.html(y)}else{if(typeof A.html!=="undefined"){x=A.html}}}v.append(x);var w=function(){if(typeof A.enabled!=="undefined"){return A.enabled.call(y,y,p,q,x)}else{if(typeof A[2]==="function"){return A[2].call(y,y,p,q,x)}else{return true}}};a(y,w(),A,s,v,z,q,x,p,r,o)};var k=function(p,r,q,o){i.all(o).then(function(){var z=q.pageY;var y=angular.element(p[0]).prop("offsetHeight");var t=q.view.innerHeight;if(z>y&&t-z<y){z=q.pageY-y}else{if(t<=y){angular.element(p[0]).css({height:t-5,"overflow-y":"scroll"});z=0}else{if(t-z<y){var w=5;if(z<w){w=z}z=t-y-w}}}var x=q.pageX;var v=angular.element(p[0]).prop("offsetWidth");var s=q.view.innerWidth;var u=5;if(x>v&&s-x-u<v){x=s-v-u}else{if(s-x<v){var w=5;if(x<w+u){w=x+u}x=s-v-w-u}}p.css({display:"block",position:"absolute",left:x+"px",top:z+"px"})})};var a=function(x,u,z,t,v,y,r,w,p,s,o){if(u){var q=function(A){m(o+1);var B={pageX:p.pageX+t[0].offsetWidth-1,pageY:t[0].offsetTop+v[0].offsetTop-3,view:p.view||window};i.when(y).then(function(C){j(x,B,C,r,o+1)})};v.on("click",function(A){A.preventDefault();x.$apply(function(){if(y){q(A)}else{s(p.currentTarget).removeClass("context");m();if(angular.isFunction(z[1])){z[1].call(x,x,p,r,w,v)}else{z.click.call(x,x,p,r,w,v)}}})});v.on("mouseover",function(A){x.$apply(function(){if(y){q(A)}})})}else{v.on("click",function(A){A.preventDefault()});v.addClass("disabled")}};var j=function(y,p,z,r,o,x){if(!o){o=0}if(!u){var u=angular.element}u(p.currentTarget).addClass("context");var v=u("<div>");if(d){v=d}else{d=v;v.addClass("angular-bootstrap-contextmenu dropdown clearfix")}if(x){v.addClass(x)}var t=u("<ul>");t.addClass("dropdown-menu");t.attr({role:"menu"});t.css({display:"block",position:"absolute",left:p.pageX+"px",top:p.pageY+"px","z-index":10000});var s=[];angular.forEach(z,function(A){var B=u("<li>");if(A===null){B.addClass("divider")}else{if(typeof A[0]==="object"){b.initialize(B,A)}else{e(y,p,r,A,t,B,s,i,u,o)}}t.append(B)});v.append(t);var w=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);v.css({width:"100%",height:w+"px",position:"absolute",top:0,left:0,zIndex:9999,"max-height":window.innerHeight-3,});u(document).find("body").append(v);k(t,o,p,s);function q(A){if(u(A.target).hasClass("angular-bootstrap-contextmenu")){u(p.currentTarget).removeClass("context");m()}}u(document.body).on("mousedown",q);v.on("contextmenu",function(A){u(A.currentTarget).removeClass("context");A.preventDefault();m(o)});y.$on("$destroy",function(){m();u(document.body).off("mousedown",q)});l.push(t)};function f(){return"ontouchstart" in window||navigator.maxTouchPoints}return function(o,r,q){var p="contextmenu";if(q.contextMenuOn&&typeof(q.contextMenuOn)==="string"){p=q.contextMenuOn}r.on(p,function(s){if(!q.allowEventPropagation){s.stopPropagation();s.preventDefault()}if(f()&&r.attr("draggable")==="true"){return false}o.$apply(function(){var u=o.$eval(q.contextMenu);var v=q.contextMenuClass;var t=o.$eval(q.model);if(u instanceof Array){if(u.length===0){return}j(o,s,u,t,undefined,v)}else{throw'"'+q.contextMenu+'" not an array'}})})}}]);